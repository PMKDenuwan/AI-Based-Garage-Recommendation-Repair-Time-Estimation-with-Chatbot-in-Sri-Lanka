Building on the existing project, implement COMPLETE DRIVER MODULE:

1. AUTHENTICATION & PROFILE:
- Login screen â†’ Verify OTP â†’ Role selection if new user â†’ Driver Dashboard
- Profile Management:
  * Edit name, email, phone, address (text input for now)
  * Add/Edit/Delete Vehicles (Suzuki Alto 2010-2025 only)
  * Vehicle form: Model dropdown, Year, Mileage (km), Transmission (Manual/Auto), Registration number
  * Display vehicle list with edit/delete buttons

2. AI CHATBOT DIAGNOSTIC SYSTEM (HARDCODED DEMO FLOWS):

**CRITICAL: Implement exact conversation flows with trigger phrase detection**

TRIGGER DETECTION:
- If user message contains "brake" OR "grinding" OR "brake noise" â†’ Activate BRAKE FLOW
- If user message contains "overheating" OR "overheat" OR "engine stopped" â†’ Activate OVERHEATING FLOW

CASE 1: BRAKE GRINDING (DRIVABLE FLOW)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Initial Message:
Bot: "Hi Kavindu! ğŸ‘‹ I'm here to help with your Suzuki Alto.
What seems to be the problem today?"

User types: "My brakes are making grinding noises when I press them"

Bot Response:
"I understand you're hearing grinding noises from the brakes.
Let's go through a few questions to diagnose this properly.

Have you parked the car now? Are you safe?"
[Yes] [No] buttons

User selects: [Yes]

Bot: " Are you inside or outside the vehicle right now?"
[Inside] [Outside] buttons

User selects: [Inside]

Bot: "How fast were you driving when the noise occurred?"
[Low speed] [Moderate speed] [High speed] buttons

User selects: [Low speed]

Bot: "Is the brake warning light illuminated on your dashboard?"
[Yes] [No] buttons

User selects: [No]

Bot: "Great! Thanks. Next:

 How does the brake pedal feel when you press it?"
[Normal] [Soft/Spongy] [Hard to press] [Goes to floor] buttons

User selects: [Normal]

Bot: "Understood.

 When do you hear the grinding noise?"
[Every time I brake]
[Only at high speeds]
[Only when stopping completely]
[Only in the morning] buttons

User selects: [Every time I brake]

Bot: "Got it. A few more quick questions to understand the situation better:

 Is the vehicle still running normally? Can you drive it safely at low speeds?"
[Yes, runs fine] [No, something's wrong] buttons

User selects: [Yes, runs fine]

Bot: "Perfect! Let's also take a look at your dashboard.

ğŸ“¸ Please upload a clear photo of your dashboard with the ignition ON."

[Show camera upload button with icon]

User uploads image

Bot (with typing indicator for 2 seconds):
"ğŸ“Š Analyzing dashboard image...

âœ“ Analysis Complete!

Dashboard Status:
- No warning lights detected
- Temperature: Normal
- Fuel level: Adequate
- All systems operational

Now let me create your complete diagnosis..."

[Show loading spinner for 2 seconds]

Then show DIAGNOSIS RESULT CARD (full screen modal or new screen):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ” DIAGNOSIS COMPLETE               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚ Vehicle Details:                             â”‚
â”‚ â€¢ Model: Suzuki Alto 2018                    â”‚
â”‚ â€¢ Mileage: 45,000 km                         â”‚
â”‚ â€¢ Transmission: Manual                       â”‚
â”‚                                              â”‚
â”‚ Fault Information:                           â”‚
â”‚ â€¢ Category: BRAKE SYSTEM                     â”‚
â”‚ â€¢ Fault Type: Brake Pad Wear                 â”‚
â”‚ â€¢ Severity: âš ï¸ MODERATE                      â”‚
â”‚                                              â”‚
â”‚ Symptoms Detected:                           â”‚
â”‚ âœ“ Grinding noise when braking                â”‚
â”‚ âœ“ Consistent across all speeds               â”‚
â”‚ âœ“ No warning lights                          â”‚
â”‚ âœ“ Normal pedal feel                          â”‚
â”‚ âœ“ Vehicle operational                        â”‚
â”‚                                              â”‚
â”‚ â± Estimated Repair Time:                     â”‚
â”‚ 1.0 - 1.5 hours                              â”‚
â”‚ (Based on ML prediction model)               â”‚
â”‚                                              â”‚
â”‚ ğŸš¦ Drivability Assessment:                   â”‚
â”‚ âœ… DRIVABLE WITH CAUTION                     â”‚
â”‚                                              â”‚
â”‚ Safety Instructions:                         â”‚
â”‚ â€¢ Drive at moderate speeds (< 60 km/h)       â”‚
â”‚ â€¢ Increase following distance                â”‚
â”‚ â€¢ Avoid sudden braking                       â”‚
â”‚ â€¢ Seek repair within 2-3 days                â”‚
â”‚                                              â”‚
â”‚ ğŸ§© Parts Required:                           â”‚
â”‚ â€¢ Brake Pads (Front)                         â”‚
â”‚ â€¢ Brake Pads (Rear)                          â”‚
â”‚                                              â”‚
â”‚ Urgency Level: MEDIUM                        â”‚
â”‚                                              â”‚
â”‚ [Find Nearby Garages â†’]                      â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Style this card with:
- White background
- Rounded corners (16px)
- Shadow
- Color-coded severity (orange for moderate)
- Icons for each section
- Green button at bottom

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

CASE 2: ENGINE OVERHEATING (NOT DRIVABLE FLOW)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Initial Message:
Bot: "Hi Kavindu! ğŸ‘‹ I'm here to help with your Suzuki Alto.
What seems to be the problem today?"

User types: "My car is overheating and stopped running near Dondra"

Bot Response (urgent style with warning colors):
"âš ï¸ I understand this is urgent. Your car has overheated and stopped.
Let me ask critical safety questions first.

ğŸš¨ SAFETY CHECK:

 Have you parked the car now? Are you safe?"
[Yes] [No] buttons

User selects: [Yes]

Bot: " Are you inside or outside the vehicle right now?"
[Inside] [Outside] buttons

User selects: [Outside]

Bot: " Is there steam or white smoke coming from the bonnet?"
[Yes, I see steam] [No steam visible] buttons

User selects: [Yes, I see steam]

Bot (with red warning banner):
"âš ï¸ IMPORTANT: Do NOT open the bonnet or restart the engine.

 How fast were you driving when this happened?"
[Show text input field with keyboard]

User types: "About 60 km/h on the highway"

Bot: "Thank you. Now please upload a photo of your dashboard so I can see the warning lights.

ğŸ“¸ [Upload Dashboard Photo]"

User uploads image (with red temperature warning light)

Bot (with typing indicator):
"ğŸ“Š Analyzing dashboard image...

âš ï¸ Critical Warnings Detected:

ğŸ”´ Temperature Warning Light (RED)
ğŸŸ¡ Check Engine Light (YELLOW)

Analysis: Engine overheating condition confirmed

Continuing diagnosis...

 Did the engine completely stop, or is it still running?"
[Completely stopped] [Still running but rough] buttons

User selects: [Completely stopped]

Bot: " Can you see any fluid leaking under the car?
Please check safely from outside the vehicle."
[Yes, I see coolant (green/yellow liquid)]
[Yes, I see oil (dark liquid)]
[No visible leaks]
[I can't check safely] buttons

User selects: [Yes, I see coolant (green/yellow liquid)]

Bot: " Before the engine stopped, did you hear any unusual noises?"
[Knocking/banging sounds]
[Hissing sound]
[No unusual sounds]
[Not sure] buttons

User selects: [Hissing sound]

Bot: "How is your current location? Are you in a safe place?"
[On main road - safe shoulder]
[Highway - safe emergency lane]
[Side road - safe area]
[Unsafe location - need help urgently] buttons

User selects: [On main road - safe shoulder]

Bot: "âœ“ Thank you for providing all the information safely.
Let me create your complete diagnosis now...

ğŸ”„ Processing diagnosis..."

[Show loading spinner for 3 seconds]

Then show CRITICAL DIAGNOSIS CARD (full screen with red theme):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ğŸš¨ CRITICAL DIAGNOSIS RESULT           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚ ğŸš— Vehicle Information                       â”‚
â”‚ â€¢ Model: Suzuki Alto 2018                    â”‚
â”‚ â€¢ Mileage: 45,000 km                         â”‚
â”‚ â€¢ Current Location: Near Dondra              â”‚
â”‚                                              â”‚
â”‚ âš ï¸ Fault Information                         â”‚
â”‚ â€¢ System: Engine Cooling System              â”‚
â”‚ â€¢ Fault Type: Radiator/Coolant Failure       â”‚
â”‚ â€¢ Severity: ğŸ”´ MAJOR (Critical)              â”‚
â”‚                                              â”‚
â”‚ ğŸ”¥ Critical Symptoms Detected                â”‚
â”‚ â€¢ Engine completely stopped                  â”‚
â”‚ â€¢ Steam/white smoke from bonnet              â”‚
â”‚ â€¢ Coolant leakage confirmed                  â”‚
â”‚ â€¢ Temperature warning RED                    â”‚
â”‚ â€¢ Hissing sound (pressure release)           â”‚
â”‚ â€¢ Speed before failure: ~60 km/h             â”‚
â”‚                                              â”‚
â”‚ ğŸ“Š Dashboard Warning Analysis                â”‚
â”‚ â€¢ ğŸ”´ Engine Temperature: Critical            â”‚
â”‚ â€¢ ğŸŸ¡ Check Engine Light: Active              â”‚
â”‚                                              â”‚
â”‚ â± Estimated Repair Time                      â”‚
â”‚ â€¢ Duration: 2.0 - 3.0 hours                  â”‚
â”‚ â€¢ Includes full system diagnosis             â”‚
â”‚                                              â”‚
â”‚ ğŸš¦ Drivability Assessment                    â”‚
â”‚ â€¢ Status: ğŸ›‘ NOT DRIVABLE                    â”‚
â”‚ â€¢ Condition: EMERGENCY                       â”‚
â”‚                                              â”‚
â”‚ âš ï¸ Immediate Safety Instructions             â”‚
â”‚ â€¢ Do NOT restart the engine                  â”‚
â”‚ â€¢ Do NOT open the bonnet                     â”‚
â”‚ â€¢ Keep distance from vehicle front           â”‚
â”‚ â€¢ Wait for professional mechanic             â”‚
â”‚ â€¢ Do NOT attempt to drive                    â”‚
â”‚                                              â”‚
â”‚ ğŸ” Likely Causes                             â”‚
â”‚ â€¢ Radiator leakage/failure                   â”‚
â”‚ â€¢ Water pump malfunction                     â”‚
â”‚ â€¢ Thermostat failure                         â”‚
â”‚ â€¢ Coolant hose rupture                       â”‚
â”‚                                              â”‚
â”‚ ğŸš¨ Urgency: EMERGENCY                        â”‚
â”‚ ğŸ“ˆ Confidence: 95%                           â”‚
â”‚                                              â”‚
â”‚ [Request Roadside Mechanic â†’]                â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



s


3. GARAGE RECOMMENDATION (IF DRIVABLE):

HARDCODED DEMO GARAGES (5 garages near SLIIT Malabe):
```javascript
const demoGarages = [
  { id: 1, name: "Quick Fix Auto", lat: 6.9147, lng: 79.9729, distance: 2.1, rating: 4.3, availableMechanics: 3, status: "Available", waitTime: 0, specialties: ["Brake", "Engine"] },
  { id: 2, name: "Express Auto Service", lat: 6.9200, lng: 79.9800, distance: 3.5, rating: 4.0, availableMechanics: 2, status: "Busy", waitTime: 57, specialties: ["Electrical", "Transmission"] },
  { id: 3, name: "City Motors", lat: 6.9100, lng: 79.9850, distance: 5.2, rating: 4.6, availableMechanics: 5, status: "Available", waitTime: 0, specialties: ["Engine", "Brake", "Transmission"] },
  { id: 4, name: "Malabe Auto Care", lat: 6.9180, lng: 79.9750, distance: 1.8, rating: 4.4, availableMechanics: 4, status: "Available", waitTime: 0, specialties: ["All"] },
  { id: 5, name: "Sri Auto Workshop", lat: 6.9220, lng: 79.9820, distance: 4.1, rating: 3.9, availableMechanics: 2, status: "Busy", waitTime: 45, specialties: ["Engine", "Electrical"] }
];
```

RANKING ALGORITHM (implement exactly):
```javascript
function rankGarages(garages, userLat, userLng) {
  return garages.map(garage => {
    // 1. Distance Score (40% weight)
    const distanceScore = garage.distance;
    
    // 2. Waiting Time Score (30% weight) - assuming 8 min drive time for demo
    const driveTime = garage.distance * 4; // rough estimate: 4 min per km
    const totalWait = garage.waitTime + driveTime;
    const waitScore = totalWait / 60;
    
    // 3. Rating Score (20% weight)
    const ratingScore = 5 - garage.rating;
    
    // 4. Availability Score (10% weight)
    const availabilityScore = 5 - garage.availableMechanics;
    
    // Composite Score (Lower is Better)
    const compositeScore = 
      (distanceScore * 0.4) +
      (waitScore * 0.3) +
      (ratingScore * 0.2) +
      (availabilityScore * 0.1);
    
    return { ...garage, compositeScore, ETA: Math.round(driveTime) };
  })
  .sort((a, b) => a.compositeScore - b.compositeScore)
  .slice(0, 3); // Top 3
}
```

Display garage cards showing: Name, Rating (stars), Distance, ETA, Available mechanics, Status badge (Available=green, Busy=orange)
Show garages on map with markers
[Book This Garage] button â†’ Create booking â†’ Navigate to Booking Details

4. MECHANIC DISPATCH (IF NOT DRIVABLE):

HARDCODED DEMO MECHANICS:
```javascript
const demoMechanics = [
  { id: 1, name: "John Silva", photo: "avatar1.png", rating: 4.5, experience: 8, distance: 1.5, ETA: 8, specialization: "Engine & Cooling", isOnline: true },
  { id: 2, name: "Kasun Perera", photo: "avatar2.png", rating: 4.8, experience: 12, distance: 2.8, ETA: 12, specialization: "All Systems", isOnline: true },
  { id: 3, name: "Ravi Kumar", photo: "avatar3.png", rating: 4.2, experience: 5, distance: 3.2, ETA: 15, specialization: "Brake & Electrical", isOnline: true }
];
```

Mechanic cards: Photo, Name, Rating, Experience, Distance, ETA, Specialization
[Request Mechanic] button â†’ Create mechanic job request
Show mechanic location on map
Real-time job status: Pending â†’ Mechanic Accepted â†’ Arriving (ETA countdown) â†’ On Site â†’ Completed

5. BOOKING MANAGEMENT:
- Active Bookings tab: Shows current job with status progress bar
- Job Details: Garage/Mechanic info, Vehicle, Diagnosis, Status updates, Call button
- Real-time updates via WebSocket
- After completion: Rate & Review screen (1-5 stars, review text)
- Payment section: View bill amount, Payment status toggle (not editable by driver)

6. REAL-TIME FEATURES:
- Socket.io connection on login
- Listen for: 'booking-status-update', 'mechanic-assigned', 'mechanic-location', 'service-notes-added'
- Toast notifications for updates
- In-app chat with garage/mechanic (simple message list + input)

DESIGN:
- Bottom tab navigation: Home | Bookings | Chat | Profile
- Chat interface with bubble messages, button options, loading indicators
- Diagnosis card: white bg, rounded corners, shadow, color-coded severity badges
- Touch-friendly UI (44px min button height)
- Loading states, error handling, empty states